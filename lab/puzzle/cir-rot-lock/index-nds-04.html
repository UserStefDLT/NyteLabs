<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://raw.githubusercontent.com/UserStefDLT/WebResources/master/Images/icon_st.png">
    <title>Rotating Lock | NyteLabs</title>
    <link rel="stylesheet" href="../../../stylesheets/start.css">
    <link rel="stylesheet" href="../../../stylesheets/labst.css">
    <!-- <link rel="stylesheet" href="../../../stylesheets/canvas.css"> -->
<style>
    /* *::before, *::after {
        position: absolute;
        top: 50%; left: 50%;
        transform: translateX(-50%) translateY(-50%);
    } */
    /* :root {} */
</style>
<style>
    :root {
        --scl: 3;
        --sz: calc(var(--scl) * 16px);
        --tile: calc(var(--scl) * 16px);
        --side: calc(var(--scl) * 25px);
        --center: calc(var(--scl) * 50px);
        
        --sz: calc(var(--scl) * 24px);
        --side: calc(var(--scl) * 16px);
        --center: calc(var(--scl) * 16px);
        --tile-grid: calc(var(--scl) * 48px);
        /* height: var(--tile); width: var(--tile); */
        --bgi: linear-gradient(135deg, #39f, #f39);
    }
    .grid * {box-sizing: border-box;}
    .grid, .row, .tile {
        position: relative;
        font-size: var(--sz);
    }
    .grid {margin: 1rem;}
    .row {
        display: flex;
        flex-direction: row;
    }
    .tile {
        position: relative;
        box-sizing: border-box;
        height: 1rem; width: 1rem;
        background: #fff3;
        margin: 1px;
        margin: 0px;
        z-index: 1;
        
        height: var(--tile); width: var(--tile);
    }
    /* .row:nth-child(2) .tile:nth-child(2n+1), 
    .row:nth-child(2n+1) .tile:nth-child(2n), */
    .sideTile {
        --tile-sz: var(--side);
        --tile-sz: var(--tile);
        background-color: #f003;
        background-color: #ccc3;
    }
    /* .row:nth-child(2) .tile:nth-child(2n+1)::before, 
    .row:nth-child(2n+1) .tile:nth-child(2n)::before, */
    .sideTile::before {
        content: '‚áó';
        position: absolute;
        top: 50%; left: 50%;
        height: 25px; width: 25px;
        height: var(--side); width: var(--side);
        /* background-image: linear-gradient(180deg, #39f, #f39);
        background-image: linear-gradient(180deg, #fff 5%, #39f6 5%, #f396);
        background-image: radial-gradient(#fff 5%, #39f6 5%, #f396); */
        
        transform: translateX(-50%) translateY(-50%) rotate(-45deg);
        border-radius: 100% 0%;

        height: 16px; width: 16px;
        height: var(--tile); width: var(--tile);
        display: flex; align-items: center; justify-content: center;
        transform: translateX(-50%) translateY(-50%) rotate(0deg);
        border-radius: 50%;
    }
    :where([id="grid-01"],[id="grid-02"]) .row:nth-child(2n+1) .tile:nth-child(2n)::before {
    transform: translateX(-50%) translateY(-50%) rotate(45deg);
    transform: translateX(-50%) translateY(-50%) rotate(90deg);
    }
    :where([id="grid-01"],[id="grid-02"]) .row:nth-child(2n+1) .tile:nth-child(2n)::before {
    transform: translateX(-50%) translateY(-50%) rotate(135deg);
    transform: translateX(-50%) translateY(-50%) rotate(-90deg);
    }
    /* .row:nth-child(2) .tile:nth-child(2n), */
    .centerTile {
        --tile-sz: var(--center);
        /* border-radius: 50%; */
        z-index: 2;
    }
    /* .row:nth-child(2) .tile:nth-child(2n)::before, */
    .centerTile::before {
        content: '';
        position: absolute;
        top: 50%; left: 50%;
        height: 50px; width: 50px;
        height: var(--center); width: var(--center);
        transform: translateX(-50%) translateY(-50%);
        border-radius: 50%;
        
        background-color: #0f01;
        border: 1px dashed #0f03;
        background-color: #fff1;
        border: 1px dashed #fff3;

        z-index: 2;
    }

    .sideTile[data-char]::before,
    .centerTile[data-char]::before,
    .tile[data-char]::before {
        content: attr(data-char);
        position: absolute;
        top: 50%; left: 50%;
        height: var(--tile-sz); width: var(--tile-sz);
        transform: translateX(-50%) translateY(-50%);
        display: flex; align-items: center; justify-content: center;
        color: #000c;
    }
    .tile[data-char="_"]::before {
        content: ' ';
    }
</style>
<style>
    .rotatingTile.c1 {left: 0px;}
    .rotatingTile.c2 {left: calc(var(--scl) * 32px);}
    .rotatingTile.c3 {left: calc(var(--scl) * 64px);}
    .rotatingTile {
        position: absolute;
        top: 0px;

        /* position: relative;
        top: calc(var(--scl) * -16px);
        left: calc(var(--scl) * -16px); */
        top: calc(var(--scl) * -16px);

        height: var(--tile-grid); width: var(--tile-grid);
        display: grid;
        grid-template-areas: 
        'd7 d8 d9'
        'd4 d5 d6'
        'd1 d2 d3';
        gap: 1px;
        gap: 0px;

        --hue: 180;
        --hue: calc(var(--i) * 90);
        background-color: #0003;
        background-color: #9996;
        --bg: hsla(var(--hue), 100%, 60%, .1);
        --clr: hsla(var(--hue), 100%, 60%, .15);
        --bg: hsla(var(--hue), 100%, 60%, .85);
        --clr: hsla(var(--hue), 100%, 60%, 1);

        --bg: hsla(var(--hue), 100%, 60%, 0);
        --clr: hsla(var(--hue), 100%, 60%, 1);
        background-color: var(--bg);
        outline: 3px solid var(--clr);
        outline: 1px dashed var(--clr);
        border-radius: 50%;

        transition: outline 100ms ease-in-out;
        z-index: 3;
    }
    .rotatingTile:hover {
        --clr: hsla(var(--hue), 100%, 60%, .5);
        outline: 2px dashed var(--clr);
    }
    .d1 {grid-area: d1;}
    .d2 {grid-area: d2;}
    .d3 {grid-area: d3;}
    .d4 {grid-area: d4;}
    .d5 {grid-area: d5;}
    .d6 {grid-area: d6;}
    .d7 {grid-area: d7;}
    .d8 {grid-area: d8;}
    .d9 {grid-area: d9;}

</style>
<style>
    /* water */
    /* ‚îî */
    /* [data-xy="1,1"]::after {
        content: '‚îî';
        position: absolute;
        top: 50%; left: 50%;
        height: var(--tile-sz); width: var(--tile-sz);
        transform: translateX(-50%) translateY(-50%);
        display: flex; align-items: center; justify-content: center;
        color: #39fc;
        z-index: 2;
    } */
    /* [data-char="0"]::before {content: ' '}
    [data-char="1"]::before {content: '‚ïö'}
    [data-char="2"]::before {content: '‚ï©'}
    [data-char="3"]::before {content: '‚ïù'}
    [data-char="4"]::before {content: '‚ï†'}
    [data-char="5"]::before {content: '‚ï¨'}
    [data-char="6"]::before {content: '‚ï£'}
    [data-char="7"]::before {content: '‚ïî'}
    [data-char="8"]::before {content: '‚ï¶'}
    [data-char="9"]::before {content: '‚ïó'}
    [data-char="10"]::before {content: ' '}
    [data-char="11"]::before {content: '‚ïë'}
    [data-char="12"]::before {content: '‚ïê'}

    [data-char="0"]::after {content: ' '}
    [data-char="1"]::after {content: '‚îî'}
    [data-char="2"]::after {content: '‚î¥'}
    [data-char="3"]::after {content: '‚îò'}
    [data-char="4"]::after {content: '‚îú'}
    [data-char="5"]::after {content: '‚îº'}
    [data-char="6"]::after {content: '‚î§'}
    [data-char="7"]::after {content: '‚îå'}
    [data-char="8"]::after {content: '‚î¨'}
    [data-char="9"]::after {content: '‚îê'}
    [data-char="10"]::after {content: ' '}
    [data-char="11"]::after {content: '‚îÇ'}
    [data-char="12"]::after {content: '‚îÄ'}

    [data-char]::before {--hue: 150;}
    [data-char]::after {--hue: 210;}

    [data-char]::before { --hue: 150; --alp: 1; }
    [data-char]::after { --hue: 210; --alp: 0; }
    .tile[data-char][data-quid="1"]::after {--alp: 1;}

    [data-char]::before,
    [data-char]::after {
        position: absolute;
        top: 50%; left: 50%;
        height: var(--tile-sz); width: var(--tile-sz);
        transform: translateX(-50%) translateY(-50%);
        display: flex; align-items: center; justify-content: center;
        --clr: hsla(var(--hue), 100%, 60%, 1);
        --clr: hsla(var(--hue), 100%, 60%, var(--alp));
        color: var(--clr);
        z-index: 2;
    } */
</style>

<style>
    /* [type="radio"] {
        position: relative;
        margin-right: 20px;
    }
    [type="radio"]::after {
        content: attr(id);
        position: absolute;
        position: relative;
        top: 50%; left: 50%;
        transform: translateX(-50%) translateY(-50%);
        top: 50%; left: 125%;
        transform: translateX(0%) translateY(-50%);
        margin-right: 20px;
        height: 16px; width: 16px;
        color: #0f0;
    } */
    #c1:checked ~ main [for="c1"] {z-index: 5;}
    #c2:checked ~ main [for="c2"] {z-index: 5;}
    #c3:checked ~ main [for="c3"] {z-index: 5;}
</style>
<link rel="stylesheet" href="../../../stylesheets/settings2.css">
<link rel="stylesheet" href="../../../stylesheets/end.css">
</head>
<body>
    <header>
        <a href="../../../index.html" class="backLink hidden"><div class="backBtn">Back?</div></a>
        <h1 class="title">NyteLabs</h1>
        <!-- <div class="subtitle">Rotating Lock</div> -->
    </header>
    <input type="checkbox" name="toggle" id="toggleAnimation">
    <input type="checkbox" name="toggle" id="toggleOpacity">
    <input type="checkbox" name="toggle" id="toggleLights">

    <input type="radio" class="hidden" name="lastMove" id="c1">
    <input type="radio" class="hidden" name="lastMove" id="c2">
    <input type="radio" class="hidden" name="lastMove" id="c3">
    <!-- <input type="radio" name="lastMove" id="c1">
    <input type="radio" name="lastMove" id="c2">
    <input type="radio" name="lastMove" id="c3"> -->

<main>
    <!-- <div class="shelf">
        <h3 class="shelf-title">experiment</h3>
        <div id="display">
            .grid>.row*3>.tile[data-char]*7
            .grid>.row*3>[data-char=' '].tile*7
        </div>
    </div> -->
    <div class="shelf">
        <h3 class="shelf-title">cirquit</h3>
        <div class="grid">
            <div class="row">
                <div data-char="‚ïê" class="tile"></div>
                <div data-char=" " class="tile sideTile"></div>
                <div data-char=" " class="tile"></div>
                <div data-char=" " class="tile sideTile"></div>
                <div data-char=" " class="tile"></div>
                <div data-char=" " class="tile sideTile"></div>
                <div data-char=" " class="tile"></div>
            </div>
            <div class="row">
                <div data-char=" " class="tile sideTile"></div>
                <label for="c1" class="tile rotatingTile c1">
                    <div data-char="‚ïó" class="tile sideTile d8" data-xy="1,0"></div>
                    <div data-char=" " class="tile sideTile d4" data-xy="0,1"></div>
                    <div data-char="‚ïö" class="tile centerTile d5" data-xy="1,1"></div>
                    <div data-char="‚ïê" class="tile sideTile d6" data-xy="2,1"></div>
                    <div data-char=" " class="tile sideTile d2" data-xy="1,2"></div>
                </label>
                <!-- <div data-char=" " class="tile sideTile"></div> -->
                <label for="c2" class="tile rotatingTile c2">
                    <div data-char=" " class="tile sideTile d8" data-xy="3,0"></div>
                    <div data-char="‚ïê" class="tile sideTile d4" data-xy="2,1"></div>
                    <div data-char="‚ïó" class="tile centerTile d5" data-xy="3,1"></div>
                    <div data-char=" " class="tile sideTile d6" data-xy="4,1"></div>
                    <div data-char="‚ïö" class="tile sideTile d2" data-xy="3,2"></div>
                </label>
                <!-- <div data-char=" " class="tile sideTile"></div> -->
                <label for="c3" class="tile rotatingTile c3">
                    <div data-char=" " class="tile sideTile d8" data-xy="5,0"></div>
                    <div data-char=" " class="tile sideTile d4" data-xy="4,1"></div>
                    <div data-char="‚ïî" class="tile centerTile d5" data-xy="5,1"></div>
                    <div data-char="‚ïê" class="tile sideTile d6" data-xy="6,1"></div>
                    <div data-char="‚ïù" class="tile sideTile d2" data-xy="5,2"></div>
                </label>
                <!-- <div data-char=" " class="tile sideTile"></div> -->
            </div>
            <div class="row">
                <div data-char=" " class="tile"></div>
                <div data-char=" " class="tile sideTile"></div>
                <div data-char=" " class="tile"></div>
                <div data-char=" " class="tile sideTile"></div>
                <div data-char="‚ïê" class="tile"></div>
                <div data-char=" " class="tile sideTile"></div>
                <div data-char=" " class="tile"></div>
            </div>
        </div>
    </div>

    <!-- <div class="shelf">
        <h3 class="shelf-title">cirquit</h3>
        <div class="grid">
            <div class="row">
                <div data-char="‚ïê" class="tile"></div>
                <div data-char=" " class="tile sideTile"></div>
                <div data-char=" " class="tile"></div>
                <div data-char=" " class="tile sideTile"></div>
                <div data-char=" " class="tile"></div>
                <div data-char=" " class="tile sideTile"></div>
                <div data-char=" " class="tile"></div>
            </div>
            <div class="row">
                <div data-char=" " class="tile sideTile"></div>
                <div class="tile rotatingTile c1">
                    <div data-char="‚ïó" class="tile sideTile d8" data-xy="1,0"></div>
                    <div data-char=" " class="tile sideTile d4" data-xy="0,1"></div>
                    <div data-char="‚ïö" class="tile centerTile d5" data-xy="1,1"></div>
                    <div data-char="‚ïê" class="tile sideTile d6" data-xy="2,1"></div>
                    <div data-char=" " class="tile sideTile d2" data-xy="1,2"></div>
                </div>
                <div class="tile rotatingTile c2">
                    <div data-char=" " class="tile sideTile d8" data-xy="3,0"></div>
                    <div data-char="‚ïê" class="tile sideTile d4" data-xy="2,1"></div>
                    <div data-char="‚ïó" class="tile centerTile d5" data-xy="3,1"></div>
                    <div data-char=" " class="tile sideTile d6" data-xy="4,1"></div>
                    <div data-char="‚ïö" class="tile sideTile d2" data-xy="3,2"></div>
                </div>
                <div class="tile rotatingTile c3">
                    <div data-char=" " class="tile sideTile d8" data-xy="5,0"></div>
                    <div data-char=" " class="tile sideTile d4" data-xy="4,1"></div>
                    <div data-char="‚ïî" class="tile centerTile d5" data-xy="5,1"></div>
                    <div data-char="‚ïê" class="tile sideTile d6" data-xy="6,1"></div>
                    <div data-char="‚ïù" class="tile sideTile d2" data-xy="5,2"></div>
                </div>
            </div>
            <div class="row">
                <div data-char=" " class="tile"></div>
                <div data-char=" " class="tile sideTile"></div>
                <div data-char=" " class="tile"></div>
                <div data-char=" " class="tile sideTile"></div>
                <div data-char="‚ïê" class="tile"></div>
                <div data-char=" " class="tile sideTile"></div>
                <div data-char=" " class="tile"></div>
            </div>
        </div>
    </div> -->

    <!-- <div class="shelf">
        <h3 class="shelf-title">cirquit</h3>
        <div class="grid">
            <div class="row">
                <div data-char="‚ïê" class="tile"></div>
                <div data-char="‚ïó" class="tile sideTile"></div>
                <div data-char=" " class="tile"></div>
                <div data-char=" " class="tile sideTile"></div>
                <div data-char=" " class="tile"></div>
                <div data-char=" " class="tile sideTile"></div>
                <div data-char=" " class="tile"></div>
            </div>
            <div class="row">
                <div data-char=" " class="tile sideTile"></div>
                <div data-char="‚ïö" class="tile centerTile"></div>
                <div data-char="‚ïê" class="tile sideTile"></div>
                <div data-char="‚ïó" class="tile centerTile"></div>
                <div data-char=" " class="tile sideTile"></div>
                <div data-char="‚ïî" class="tile centerTile"></div>
                <div data-char="‚ïê" class="tile sideTile"></div>
            </div>
            <div class="row">
                <div data-char=" " class="tile"></div>
                <div data-char=" " class="tile sideTile"></div>
                <div data-char=" " class="tile"></div>
                <div data-char="‚ïö" class="tile sideTile"></div>
                <div data-char="‚ïê" class="tile"></div>
                <div data-char="‚ïù" class="tile sideTile"></div>
                <div data-char=" " class="tile"></div>
            </div>
        </div>
    </div>
    <div class="shelf hidden">
        <h3 class="shelf-title">criptex</h3>
        <div id="grid-01" class="grid">
            <div class="row">
                <div class="tile"></div>
                <div class="tile" data-char="n"></div>
                <div class="tile"></div>
                <div class="tile" data-char="o"></div>
                <div class="tile"></div>
                <div class="tile" data-char="u"></div>
                <div class="tile"></div>
            </div>
            <div class="row">
                <div class="tile" data-char="L"></div>
                <div class="tile centerTile" data-char="E"></div>
                <div class="tile" data-char="T"></div>
                <div class="tile centerTile" data-char="M" ></div>
                <div class="tile" data-char="E"></div>
                <div class="tile centerTile" data-char="I"></div>
                <div class="tile" data-char="N"></div>
            </div>
            <div class="row">
                <div class="tile"></div>
                <div class="tile" data-char="‚ãÄ"></div>
                <div class="tile"></div>
                <div class="tile" data-char="‚Ä¢"></div>
                <div class="tile"></div>
                <div class="tile" data-char="‚ãÅ"></div>
                <div class="tile"></div>
            </div>
        </div>        
        
        <div id="grid-02" class="grid">
            <div class="row">
                <div class="tile" data-char="‚ïê"></div>
                <div class="tile" data-char="Œõ"></div>
                <div class="tile"></div>
                <div class="tile" data-char="–Ö"></div>
                <div class="tile"></div>
                <div class="tile" data-char="Œû"></div>
                <div class="tile"></div>
            </div>
            <div class="row">
                <div class="tile" data-char="L"></div>
                <div class="tile centerTile" data-char="Œ£"></div>
                <div class="tile" data-char="–¢"></div>
                <div class="tile centerTile" data-char="M"></div>
                <div class="tile" data-char="Œ£"></div>
                <div class="tile centerTile" data-char="Œô"></div>
                <div class="tile" data-char="N"></div>
            </div>
            <div class="row">
                <div class="tile"></div>
                <div class="tile" data-char="Œó"></div>
                <div class="tile"></div>
                <div class="tile" data-char="Œò"></div>
                <div class="tile"></div>
                <div class="tile" data-char="–ó"></div>
                <div class="tile"></div>
            </div>
        </div>
        
        <div id="grid-03" class="grid hidden">
            <div class="row">
                <div class="tile" data-char="‚ïê"></div>
                <div class="tile" data-char="‚ïó"></div>
                <div class="tile" data-char=" "></div>
                <div class="tile" data-char=" "></div>
                <div class="tile" data-char=" "></div>
                <div class="tile" data-char=" "></div>
                <div class="tile" data-char=" "></div>
            </div>
            <div class="row">
                <div class="tile" data-char=" "></div>
                <div class="tile" data-char="‚ïö"></div>
                <div class="tile" data-char="‚ïê"></div>
                <div class="tile" data-char="‚ïó"></div>
                <div class="tile" data-char=" "></div>
                <div class="tile" data-char="‚ïî"></div>
                <div class="tile" data-char="‚ïê"></div>
            </div>
            <div class="row">
                <div class="tile" data-char=" "></div>
                <div class="tile" data-char=" "></div>
                <div class="tile" data-char=" "></div>
                <div class="tile" data-char="‚ïö"></div>
                <div class="tile" data-char="‚ïê"></div>
                <div class="tile" data-char="‚ïù"></div>
                <div class="tile" data-char=" "></div>
            </div>
        </div>
    </div> -->
    <!-- <canvas id="canvas"></canvas> -->
</main>

<!-- <div class="options">
    <label for="toggleAnimation" class="toggleCheckboxLabel" data-toggle="Animation">Animation</label>
    <label for="toggleLights" class="toggleCheckboxLabel" data-toggle="Lights">üí°</label>
    <label for="toggleOpacity" class="toggleCheckboxLabel" data-toggle="Opacity">Opacity</label>
</div> -->

<footer>
    <div class="my-name">
        <a href="#">Back To Top</a>
        &copy; 2022 | by St√©fano De La Torre 
    </div>
</footer>
<div class="name-end">by St&eacute;fano.</div>
<!-- <script src="main.js"></script> -->
<script>
    /* Constant Variables */
    const s = {
        h: window.innerHeight,
        w: window.innerWidth,

        touch: {
            x: 0,
            y: 0,
            z: 0,
            paths: {},
            path_len: 20,
            tracking: false
        },
        mouse: {
            x: 0,
            y: 0,
            z: 0,
            path: [],
            path_len: 20,
            tracking: false
        },
        tile: {
            h: 20,
            w: 20,
            sz: 20,
            sz2: 10,
            margin: 16,
            fill: 0
        },
        grid: {
            h: window.innerHeight,
            w: window.innerWidth,
            cols: 15,
            rows: 15,
            margin: 24
        },
        canvas: {
            h: window.innerHeight,
            w: window.innerWidth,
            padding: 0,
            brush: "p",
        },
        box: {
            x: 500,
            y: 500,
            z: 500,
            x2: 250,
            y2: 250,
            z2: 250,
            d: 1000,
            p: 1000,
        },

        timeOut: 40,
        player: false,
        
        s: false,
        steps: false,
        tags: false,
        log: true,
        lockKeys: false,
        pause: false,
        q: false
    }
    const particles = [];
    const pg = {}

</script>
<script src="../../../scripts/settings.js"></script>
<script>
    var grid = [
        ['‚ïê','‚ïó','_','_','_','_','_'],
        ['_','‚ïö','‚ïê','‚ïó','_','‚ïî','‚ïê'],
        ['_','_','_','‚ïö','‚ïê','‚ïù','_']
    ];
    // const pipeChars = [`‚îÇ‚îÄ‚îî‚î¥‚îò‚îú‚îº‚î§‚îå‚î¨‚îê ‚ïë‚ïê‚ïö‚ï©‚ïù‚ï†‚ï¨‚ï£‚ïî‚ï¶‚ïó`];
    const quids = [' ', '‚îî', '‚î¥', '‚îò', '‚îú', '‚îº', '‚î§', '‚îå', '‚î¨', '‚îê', ' ', '‚îÇ', '‚îÄ'];
    const pipes = [' ', '‚ïö', '‚ï©', '‚ïù', '‚ï†', '‚ï¨', '‚ï£', '‚ïî', '‚ï¶', '‚ïó', ' ', '‚ïë', '‚ïê'];
    const pipeId = {
        ' ': 0, 
        '‚ïö': 1, 
        '‚ï©': 2, 
        '‚ïù': 3, 
        '‚ï†': 4, 
        '‚ï¨': 5, 
        '‚ï£': 6, 
        '‚ïî': 7, 
        '‚ï¶': 8, 
        '‚ïó': 9, 
        ' ': 10, 
        '‚ïë': 11, 
        '‚ïê': 12
    };
    const PipePaths = {
        '‚ïë':{"8":[2],"2":[8]},
        '‚ïê':{"4":[6],"6":[4]},
        '‚ïö':{"8":[6],"6":[8]},
        '‚ï©':{"8":[6,4],"4":[8,6],"6":[8,4]},
        '‚ïù':{"8":[4],"4":[8]},
        '‚ï†':{"8":[6,2],"6":[8,2],"2":[8,6]},
        '‚ï¨':{"8":[6,4,2],"4":[8,6,2],"6":[8,4,2],"2":[8,6,4]},
        '‚ï£':{"8":[4,2],"4":[8,2],"2":[8,4]},
        '‚ïî':{"6":[2],"2":[6]},
        '‚ï¶':{"4":[6,2],"6":[4,2],"2":[6,4]},
        '‚ïó':{"4":[2],"2":[4]},
        ' ':{},
    }
    const rotateZ = {
        '‚ïë':'‚ïê',
        '‚ïê':'‚ïë',
        '‚ïö':'‚ïî',
        '‚ï©':'‚ï†',
        '‚ïù':'‚ïö',
        '‚ï†':'‚ï¶',
        '‚ï¨':'‚ï¨',
        '‚ï£':'‚ï©',
        '‚ïî':'‚ïó',
        '‚ï¶':'‚ï£',
        '‚ïó':'‚ïù',
        ' ':' ',
        '_':'_',
    }
    const centerTile_IDs = ['1,1', '3,1', '5,1'];
    const gridList = {
        'g1':[
            ['‚ïê','‚ïó',' ',' ',' ',' ',' '],
            [' ','‚ïö','‚ïê','‚ïó',' ','‚ïî','‚ïê'],
            [' ',' ',' ','‚ïö','‚ïê','‚ïù',' ']
        ],
        'g2':[
            ['‚ïê','‚ïó',' ',' ',' ','‚ïî','‚ïù'],
            [' ','‚ïö','‚ï¶','‚ïó',' ','‚ïë',' '],
            ['‚ïî','‚ï¶','‚ï¨','‚ï©','‚ïê','‚ïù',' ']
            ['‚ïö','‚ï©','‚ï©','‚ïó',' ','‚ïî','‚ïó'],
            [' ',' ',' ','‚ïö','‚ïê','‚ï©','‚ï£']
        ],
        'g3':[],
    }
    function BuildBoard1(g,id=""){
        let gid = id;
        if(id==""){gid = `grid-${Object.key(gridList).length}`;}
        let grid = document.createElement('div');
        grid.classList.add('grid');
        grid.id = gid;
        for(let y = 0; y < g.length; y++){
            let row = document.createElement('div');
            row.classList.add('row');
            row.dataset.row = `${y}`;
            for(let x = 0; x < g[0].length; x++){
                let tile = document.createElement('div');
                tile.classList.add('tile');
                tile.id = `${x},${y}`;
                tile.dataset.xy = `${x},${y}`;
                tile.dataset.col = `${x}`;
            }
            grid.apendChild(row);
        }
        return grid;
    }

    //  ‚Ä¢ ‚îÄ‚îÄ‚îÄ ‚Ä¢ 
    var pipeFill = [];
    var pipeGrid = [];
    var crossAround = {
        "d2":{x:0,y:1},
        "d4":{x:-1,y:0},
        "d5":{x:0,y:0},
        "d6":{x:1,y:0},
        "d8":{x:0,y:-1}
    };
    var DialTileXY = {
        "c1":{x:1,y:1},
        "c2":{x:3,y:1},
        "c3":{x:5,y:1},
    };
    function BuildBoard2(g,dials){
        for (let i = 0; i < Object.keys(dials).length; i++) {
            let x = dials[i].x;
            let y = dials[i].y;

            let tile = document.getElementById(`tile-${x},${y}`);
            let gTile = document.createElement('div');
            gTile.classList.add('tile','gtile','dial');
            for(let side = 0; side < crossAround.length; side++){
                let nx = x + side.x;
                let ny = y + side.y;
                let pipe = document.createElement('div');
                pipe.classList.add('pipe');
                pipe.dataset.xy = `${nx},${ny}`;
                pipe.dataset.liquid = 0;
                pipe.dataset.pipe = g[ny][nx];
                gTile.apendChild(pipe);
            }
            tile.apendChild(gTile);
        }
    }

    /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
    function SetPuzzle(n=0){
        let rotationCount = n;
        if(n==0){
            rotationCount = Math.floor(Math.random()*centerTile_IDs.length + 2)*2;
            // let rotationCount = Math.round(Math.random()*centerTile_IDs.length + 2)**2;
        }
        for (let i = 0; i < rotationCount; i++) {
            let roid = Math.floor(Math.random()*centerTile_IDs.length);
            rotate(centerTile_IDs[roid]);
        }
    }

    /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */

    const rod = ['0,-1','1,0','0,0','0,1','-1,0'];
    function rotate(id){
        let x = parseInt(id.split(',')[0]);
        let y = parseInt(id.split(',')[1]);
        
        grid[y][x] = rotateZ[grid[y][x]];

        let d8 = grid[y-1][x];
        grid[y-1][x] = rotateZ[grid[y][x-1]];
        grid[y][x-1] = rotateZ[grid[y+1][x]];
        grid[y+1][x] = rotateZ[grid[y][x+1]];
        grid[y][x+1] = rotateZ[d8];

        rod.forEach(k => {
            let nx = parseInt(k.split(',')[0]) + x;
            let ny = parseInt(k.split(',')[1]) + y;
            // console.log(`[data-xy="${nx},${ny}"]`);
            let tiles = document.querySelectorAll(`[data-xy="${nx},${ny}"]`);
            tiles.forEach(tile => {
                // tile.innerText = grid[ny][nx];
                tile.dataset.char = grid[ny][nx];
            });
            // let tile = document.getElementById(k);
            // tile.innerText = grid[ny][nx];
        });
    }

    function addRotatingEvents(){
        let centerTiles = document.querySelectorAll('.centerTile');
        centerTiles.forEach(ctile => {
            ctile.addEventListener('click', (ev) => {
                // console.log(ev.target);
                console.log(ev.target.dataset.xy);
                if(ev.target.dataset.xy != null){
                    rotate(ev.target.dataset.xy);
                }
            });
        });
        // console.log(`centerTiles.len = ${centerTiles.length}`);
    }

    /* ‚îÄ‚îÄ‚îÄ Events ‚îÄ‚îÄ‚îÄ */
    function updateSettings(){
        s.h = window.innerHeight;
        s.w = window.innerWidth;
        s.dim = Math.sqrt(s.h * s.h + s.w * s.w);

        /* ‚îÄ Canvas ‚îÄ */
        s.canvas.x = s.w;
        s.canvas.y = s.h;
        s.canvas.z = (s.h + s.w)/2;

        s.canvas.x2 = s.canvas.x/2;
        s.canvas.y2 = s.canvas.y/2;
        s.canvas.z2 = s.canvas.z/2;

        /* ‚îÄ Box ‚îÄ */
        /* resize box for mobile */
        if(s.h < s.box.y) {s.box.y = s.h;}
        if(s.w < s.box.x) {s.box.x = s.w;}
        s.box.z = (s.box.y + s.box.x)/2;

        /* center box */
        s.box.top = (s.h - s.box.y)/2;
        s.box.left = (s.w - s.box.x)/2;

        /* determine center */
        s.box.x2 = s.box.left + (s.box.x / 2);
        s.box.y2 = s.box.top + (s.box.y / 2);
        s.box.z2 = (s.box.z / 2);

        /* ‚îÄ Grid ‚îÄ */
        s.grid.cols = Math.floor(s.w / s.tile.w);
        s.grid.rows = Math.floor(s.h / s.tile.h);

        /* ‚îÄ Canvas Update ‚îÄ */
        // canvas.width = s.canvas.x;
        // canvas.height = s.canvas.y;
        // ctx.clearRect(0,0,canvas.width, canvas.height);
    }
    window.addEventListener('resize', () =>{
        updateSettings();
    });
    
    // window.addEventListener('click', (ev) => {
    //     let px = ev.pageX;
    //     let py = ev.pageY;
    //     let x = Math.floor(px / s.tile.w);
    //     let y = Math.floor(py / s.tile.h);
    //     console.log(`(${px},${py}) ‚Üí tile-x: ${x}, tile-y: ${y}`);
    // });
    // window.addEventListener('mousemove', (ev) =>{
    //     if(s.mouse.tracking){
    //         if(!s.q && !s.pause){
    //             s.mouse.x = ev.clientX;
    //             s.mouse.y = ev.clientY;
    //         }
    //     }
    // });

    window.addEventListener('load', (ev) => {
        console.log(`Welcome to my Lab!`);
        updateSettings();
        // start();
        // update();

        addRotatingEvents();

        // addEvents();
        // setTimeout(() => {
        //     console.time("addRotatingEvents");
        //     addRotatingEvents();
        //     console.timeEnd("addRotatingEvents");
        // }, 100);
        // setTimeout(() => {
        //     console.time("SetPuzzle");
        //     SetPuzzle(5);
        //     console.timeEnd("SetPuzzle");
        // }, 500);

        // let display = document.getElementById(`display`);

        // let g = gridList['g1'];
        // let gBoard = BuildBoard1(g);
        // display.appendChild(gBoard);
        // BuildBoard2(g,DialTileXY);

        // addRotatingEvents();
    });
    /* Version Log:
    [index-nds-00]: Default Template.
    [index-nds-01]: Base from Nds 07.
    [index-nds-02]: Organizing Locks. (nor ready.)
    [index-nds-03]: Rotation works.
    [index-nds-04]: (1) 'z-index' ready; and (2) working on programmatically generate the grid and gtiles.
    [index-nds-05]: 
    [index-nds-06]: 
    [index-nds-07]: 
    [index-nds-08]: 
    [index-nds-09]: 
    [index-nds-10]: 
    [index-nds-11]: 
    [index-nds-12]: 
    
    */
    function CSSAngleToXY(angle){
        angle = (angle+270)%360;
        let rad = angle * Math.PI / 180;
        let xy = {"x":0,"y":0};
        if(angle == 180) {xy.y = 0;} else {xy.y = Math.sin(rad);}
        if(angle == 90 || angle == 270) {xy.x = 0;} else {xy.x = Math.cos(rad);}
        return xy;
    }
    function XYtoCSSAngle(x,y){
        let angle = 90;
        if(x == 0){
            if(y > 0) {return 180;}
            if(y < 0) {return 0;}
        }
        if(x < 0) { angle += 180; }
        if(y != 0) { angle += Math.atan(y/x) * 180 / Math.PI; }
        return angle;
    }

    function randomXYZ(){
        let x = Math.random()*s.canvas.x;
        let y = Math.random()*s.canvas.y;
        let z = Math.random()*s.canvas.z;
        return {'x':x, 'y':y, 'z':z};
    }
    function randomXY(){
        let x = Math.random()*s.canvas.x;
        let y = Math.random()*s.canvas.y;
        return {'x':x, 'y':y};
    }


    /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */

    // function BuildGrid(xlen,ylen){
    //     let g = [];
    //     for (let y = 0; y < ylen; y++) {
    //         g.push([]);
    //         for (let x = 0; x < ylen; x++) {
    //             // g[y].push(' ');
    //             g[y].push(pipes[Math.floor(Math.random()*pipes.length)]);
    //         }
    //     }
    //     return g;
    // }
    // function FillGrid(xlen,ylen){
    //     for (let y = 0; y < ylen; y++) {
    //         for (let x = 0; x < ylen; x++) {
    //             if(grid[y][x] == "_"){
    //                 grid[y][x] = pipes[Math.floor(Math.random()*pipes.length)];
    //             }
    //         }
    //     }
    // }
    // function BuildBoard1(xlen,ylen){
    //     let grid = document.createElement('div');
    //     grid.classList.add('grid');
        
    //     for (let y = 0; y < ylen; y++) {
    //         let row = document.createElement('div');
    //         row.classList.add('row');
    //         for (let x = 0; x < ylen; x++) {
    //             let tile = document.createElement('div');
    //             tile.classList.add('tile');
    //             tile.id = `${x},${y}`;
    //             let id = `${x},${y}`;
    //             if(centerTile_IDs.includes(tile.id)){
    //                 tile.classList.add('centerTile');
    //             }
    //             // tile.id = `${x},${y}`;
    //             // tile.dataset.char = ` `;
    //             tile.dataset.char = grid[y][x];
    //             // tile.dataset.pipe = grid[y][x];
    //             tile.dataset.quid = 0;
    //             tile.dataset.xy = `${x},${y}`;
                
    //             row.appendChild(tile);
    //         }
    //         grid.appendChild(row);
    //     }
    // }

</script>
</body>
</html>